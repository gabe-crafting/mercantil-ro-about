import{A as K,B as Ft,C as Bt,D as Z,E as we,G as ge,H as _,e as I,I as V,J as It,d as Y,K as ue,F as pe,L as St,M as $e,N as Lt,O as Te,P as Mt,Q as kt,r as U,R as Je,S as de,U as Ae,w,V as q,f as X,W as d,X as ne,Y as _t,Z as Dt,g as W,$ as ae,a0 as me,a1 as Ze,a2 as wt,o as $t,c as Tt,a3 as et,a4 as Kt,a5 as Rt,a6 as Q,a7 as Fe,a8 as tt,a9 as nt,aa as Pt,z as st,ab as Ot,ac as Be,ad as it,ae as He,af as at,ag as lt,ah as Nt,ai as rt,aj as Ve,n as H,ak as he,al as je,t as Ee,am as Ie,an as Ht,ao as Vt,ap as jt,h as Ce,aq as oe,ar as qt,as as zt,at as Ut,au as Wt,av as Gt,aw as Yt,ax as Qt,ay as Xt,az as Jt,aA as Zt,aB as qe,aC as en,aD as tn,aE as nn,aF as sn,aG as an}from"./DZL9sNFn.js";import{f as ln}from"./C5M63iUH.js";function rn(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function on(n){return K(()=>Ft(n)?!!Bt(n)?.closest("form"):!0)}const ze=Z({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(n){const e=n,{primitiveElement:t,currentElement:i}=we(),a=K(()=>e.checked??e.value);return ge(a,(s,r)=>{if(!i.value)return;const o=i.value,u=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(u,"value").set;if(l&&s!==r){const p=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});l.call(o,s),o.dispatchEvent(p),o.dispatchEvent(f)}}),(s,r)=>(I(),_(It,V({ref_key:"primitiveElement",ref:t},{...e,...s.$attrs},{as:"input"}),null,16))}}),un=Z({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(n){const e=n,t=K(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),i=K(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((a,s)=>typeof a=="object"?Object.entries(a).map(([r,o])=>({name:`[${e.name}][${s}][${r}]`,value:o})):{name:`[${e.name}][${s}]`,value:a}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([a,s])=>({name:`[${e.name}][${a}]`,value:s})):[]);return(a,s)=>t.value?(I(),_(ze,V({key:a.name},{...e,...a.$attrs},{name:a.name,value:a.value}),null,16,["name","value"])):(I(!0),Y(pe,{key:1},ue(i.value,r=>(I(),_(ze,V({key:r.name,ref_for:!0},{...e,...a.$attrs},{name:r.name,value:r.value}),null,16,["name","value"]))),128))}});function cn(n,e,t){return n===void 0?!1:Array.isArray(n)?n.some(i=>ce(i,e,t)):ce(n,e,t)}function ce(n,e,t){return n===void 0||e===void 0?!1:typeof n=="string"?n===e:typeof t=="function"?t(n,e):typeof t=="string"?n?.[t]===e?.[t]:St(n,e)}const[Ke,dn]=$e("ListboxRoot"),hn=Z({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:e,emit:t}){const i=n,a=t,{multiple:s,highlightOnHover:r,orientation:o,disabled:u,selectionBehavior:h,dir:l}=Lt(i),{getItems:p}=Te({isProvider:!0}),{handleTypeaheadSearch:f}=Mt(),{primitiveElement:v,currentElement:m}=we(),B=rn(),D=kt(l),j=on(m),R=U(),P=U(!1),C=U(!0),y=Je(i,"modelValue",a,{defaultValue:i.defaultValue??(s.value?[]:void 0),passive:i.modelValue===void 0,deep:!0});function M(g){if(P.value=!0,i.multiple){const x=Array.isArray(y.value)?[...y.value]:[],L=x.findIndex(O=>ce(O,g,i.by));i.selectionBehavior==="toggle"?(L===-1?x.push(g):x.splice(L,1),y.value=x):(y.value=[g],R.value=g)}else i.selectionBehavior==="toggle"&&ce(y.value,g,i.by)?y.value=void 0:y.value=g;setTimeout(()=>{P.value=!1},1)}const E=U(null),b=U(null),F=U(!1),S=U(!1),c=Ae(),k=Ae(),$=Ae();function T(){return p().map(g=>g.ref).filter(g=>g.dataset.disabled!=="")}function N(g,x=!0){if(!g)return;E.value=g,C.value&&E.value.focus(),x&&E.value.scrollIntoView({block:"nearest"});const L=p().find(O=>O.ref===g);a("highlight",L)}function se(g){if(F.value)$.trigger(g);else{const x=p().find(L=>ce(L.value,g,i.by));x&&(E.value=x.ref,N(x.ref))}}function vt(g){E.value&&E.value.isConnected&&(g.preventDefault(),g.stopPropagation(),S.value||E.value.click())}function yt(g){if(C.value){if(P.value=!0,F.value)k.trigger(g);else{const x=g.altKey||g.ctrlKey||g.metaKey;if(x&&g.key==="a"&&s.value){const L=p(),O=L.map(ie=>ie.value);y.value=[...O],g.preventDefault(),N(L[L.length-1].ref)}else if(!x){const L=f(g.key,p());L&&N(L)}}setTimeout(()=>{P.value=!1},1)}}function bt(){S.value=!0}function At(){requestAnimationFrame(()=>{S.value=!1})}function Pe(){de(()=>{const g=new KeyboardEvent("keydown",{key:"PageUp"});Oe(g)})}function be(g){const x=E.value;x?.isConnected&&(b.value=x),E.value=null,a("leave",g)}function Et(g){const x=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(g.currentTarget?.dispatchEvent(x),a("entryFocus",x),!x.defaultPrevented)if(b.value)N(b.value);else{const L=T()?.[0];N(L)}}function Oe(g){const x=_t(g,o.value,D.value);if(!x)return;let L=T();if(E.value){if(x==="last")L.reverse();else if(x==="prev"||x==="next"){x==="prev"&&L.reverse();const O=L.indexOf(E.value);L=L.slice(O+1)}Ct(g,L[0])}if(L.length){const O=!E.value&&x==="prev"?L.length-1:0;N(L[O])}if(F.value)return k.trigger(g)}function Ct(g,x){if(!(F.value||i.selectionBehavior!=="replace"||!s.value||!Array.isArray(y.value)||(g.altKey||g.ctrlKey||g.metaKey)&&!g.shiftKey)&&g.shiftKey){const O=p().filter(re=>re.ref.dataset.disabled!=="");let ie=O.find(re=>re.ref===x)?.value;if(g.key===B.END?ie=O[O.length-1].value:g.key===B.HOME&&(ie=O[0].value),!ie||!R.value)return;const xt=ln(O.map(re=>re.value),R.value,ie);y.value=xt}}async function Ne(g){if(await de(),F.value)c.trigger(g);else{const x=T(),L=x.find(O=>O.dataset.state==="checked");L?N(L):x.length&&N(x[0])}}return ge(y,()=>{P.value||de(()=>{Ne()})},{immediate:!0,deep:!0}),e({highlightedElement:E,highlightItem:se,highlightFirstItem:Pe,highlightSelected:Ne,getItems:p}),dn({modelValue:y,onValueChange:M,multiple:s,orientation:o,dir:D,disabled:u,highlightOnHover:r,highlightedElement:E,isVirtual:F,virtualFocusHook:c,virtualKeydownHook:k,virtualHighlightHook:$,by:i.by,firstValue:R,selectionBehavior:h,focusable:C,onLeave:be,onEnter:Et,changeHighlight:N,onKeydownEnter:vt,onKeydownNavigation:Oe,onKeydownTypeAhead:yt,onCompositionStart:bt,onCompositionEnd:At,highlightFirstItem:Pe}),(g,x)=>(I(),_(d(ne),{ref_key:"primitiveElement",ref:v,as:g.as,"as-child":g.asChild,dir:d(D),"data-disabled":d(u)?"":void 0,onPointerleave:be,onFocusout:x[0]||(x[0]=async L=>{const O=L.relatedTarget||L.target;await de(),E.value&&d(m)&&!d(m).contains(O)&&be(L)})},{default:w(()=>[q(g.$slots,"default",{modelValue:d(y)}),d(j)&&g.name?(I(),_(d(un),{key:0,name:g.name,value:d(y),disabled:d(u),required:g.required},null,8,["name","value","disabled","required"])):X("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),fn=Z({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(n){const{CollectionSlot:e}=Te(),t=Ke(),i=Dt(!1,10);return(a,s)=>(I(),_(d(e),null,{default:w(()=>[W(d(ne),{role:"listbox",as:a.as,"as-child":a.asChild,tabindex:d(t).focusable.value?d(t).highlightedElement.value?"-1":"0":void 0,"aria-orientation":d(t).orientation.value,"aria-multiselectable":!!d(t).multiple.value,"data-orientation":d(t).orientation.value,onMousedown:s[0]||(s[0]=me(r=>i.value=!0,["left"])),onFocus:s[1]||(s[1]=r=>{d(i)||d(t).onEnter(r)}),onKeydown:[s[2]||(s[2]=ae(me(r=>{d(t).focusable.value&&d(t).onKeydownNavigation(r)},["prevent"]),["down","up","left","right","home","end"])),ae(d(t).onKeydownEnter,["enter"]),d(t).onKeydownTypeAhead]},{default:w(()=>[q(a.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[pn,gn]=$e("ListboxGroup"),mn=Z({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(n){const e=n,t=Ze(void 0,"reka-listbox-group");return gn({id:t}),(i,a)=>(I(),_(d(ne),V({role:"group"},e,{"aria-labelledby":d(t)}),{default:w(()=>[q(i.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),vn=Z({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,a=Je(t,"modelValue",e,{defaultValue:"",passive:t.modelValue===void 0}),s=Ke(),{primitiveElement:r,currentElement:o}=we(),u=K(()=>t.disabled||s.disabled.value||!1),h=U();return wt(()=>h.value=s.highlightedElement.value?.id),$t(()=>{s.focusable.value=!1,setTimeout(()=>{t.autoFocus&&o.value?.focus()},1)}),Tt(()=>{s.focusable.value=!0}),(l,p)=>(I(),_(d(ne),{ref_key:"primitiveElement",ref:r,as:l.as,"as-child":l.asChild,value:d(a),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":h.value,type:"text",onKeydown:[ae(me(d(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),ae(d(s).onKeydownEnter,["enter"])],onInput:p[0]||(p[0]=f=>{a.value=f.target.value,d(s).highlightFirstItem(f)}),onCompositionstart:d(s).onCompositionStart,onCompositionend:d(s).onCompositionEnd},{default:w(()=>[q(l.$slots,"default",{modelValue:d(a)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),yn="listbox.select",[bn,An]=$e("ListboxItem"),En=Z({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(n,{emit:e}){const t=n,i=e,a=Ze(void 0,"reka-listbox-item"),{CollectionItem:s}=Te(),{forwardRef:r,currentElement:o}=et(),u=Ke(),h=K(()=>o.value===u.highlightedElement.value),l=K(()=>cn(u.modelValue.value,t.value,u.by)),p=K(()=>u.disabled.value||t.disabled);async function f(m){i("select",m),!m?.defaultPrevented&&!p.value&&m&&(u.onValueChange(t.value),u.changeHighlight(o.value))}function v(m){const B={originalEvent:m,value:t.value};Rt(yn,f,B)}return An({isSelected:l}),(m,B)=>(I(),_(d(s),{value:m.value},{default:w(()=>[Kt([h.value,l.value],()=>W(d(ne),V({id:d(a)},m.$attrs,{ref:d(r),role:"option",tabindex:d(u).focusable.value?h.value?"0":"-1":-1,"aria-selected":l.value,as:m.as,"as-child":m.asChild,disabled:p.value?"":void 0,"data-disabled":p.value?"":void 0,"data-highlighted":h.value?"":void 0,"data-state":l.value?"checked":"unchecked",onClick:v,onKeydown:ae(me(v,["prevent"]),["space"]),onPointermove:B[0]||(B[0]=D=>{d(u).highlightedElement.value!==d(o)&&(d(u).highlightOnHover.value?d(u).changeHighlight(d(o),!1):d(u).focusable.value||d(u).changeHighlight(d(o),!1))})}),{default:w(()=>[q(m.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),B,1)]),_:3},8,["value"]))}}),Cn=Z({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){const e=n;et();const t=bn();return(i,a)=>d(t).isSelected.value?(I(),_(d(ne),V({key:0,"aria-hidden":"true"},e),{default:w(()=>[q(i.$slots,"default")]),_:3},16)):X("",!0)}}),xn=Z({__name:"ListboxGroupLabel",props:{for:{},asChild:{type:Boolean},as:{default:"div"}},setup(n){const e=n,t=pn({id:""});return(i,a)=>(I(),_(d(ne),V(e,{id:d(t).id}),{default:w(()=>[q(i.$slots,"default")]),_:3},16,["id"]))}});function J(n){return Array.isArray?Array.isArray(n):ct(n)==="[object Array]"}function Fn(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function Bn(n){return n==null?"":Fn(n)}function G(n){return typeof n=="string"}function ot(n){return typeof n=="number"}function In(n){return n===!0||n===!1||Sn(n)&&ct(n)=="[object Boolean]"}function ut(n){return typeof n=="object"}function Sn(n){return ut(n)&&n!==null}function z(n){return n!=null}function xe(n){return!n.trim().length}function ct(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Ln="Incorrect 'index' type",Mn=n=>`Invalid value for key ${n}`,kn=n=>`Pattern length exceeds max of ${n}.`,_n=n=>`Missing ${n} property in key`,Dn=n=>`Property 'weight' in key '${n}' must be a positive integer`,Ue=Object.prototype.hasOwnProperty;class wn{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(i=>{let a=dt(i);this._keys.push(a),this._keyMap[a.id]=a,t+=a.weight}),this._keys.forEach(i=>{i.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dt(n){let e=null,t=null,i=null,a=1,s=null;if(G(n)||J(n))i=n,e=We(n),t=Se(n);else{if(!Ue.call(n,"name"))throw new Error(_n("name"));const r=n.name;if(i=r,Ue.call(n,"weight")&&(a=n.weight,a<=0))throw new Error(Dn(r));e=We(r),t=Se(r),s=n.getFn}return{path:e,id:t,weight:a,src:i,getFn:s}}function We(n){return J(n)?n:n.split(".")}function Se(n){return J(n)?n.join("."):n}function $n(n,e){let t=[],i=!1;const a=(s,r,o)=>{if(z(s))if(!r[o])t.push(s);else{let u=r[o];const h=s[u];if(!z(h))return;if(o===r.length-1&&(G(h)||ot(h)||In(h)))t.push(Bn(h));else if(J(h)){i=!0;for(let l=0,p=h.length;l<p;l+=1)a(h[l],r,o+1)}else r.length&&a(h,r,o+1)}};return a(n,G(e)?e.split("."):e,0),i?t:t[0]}const Tn={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Kn={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},Rn={location:0,threshold:.6,distance:100},Pn={useExtendedSearch:!1,getFn:$n,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var A={...Kn,...Tn,...Rn,...Pn};const On=/[^ ]+/g;function Nn(n=1,e=3){const t=new Map,i=Math.pow(10,e);return{get(a){const s=a.match(On).length;if(t.has(s))return t.get(s);const r=1/Math.pow(s,.5*n),o=parseFloat(Math.round(r*i)/i);return t.set(s,o),o},clear(){t.clear()}}}class Re{constructor({getFn:e=A.getFn,fieldNormWeight:t=A.fieldNormWeight}={}){this.norm=Nn(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,G(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();G(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!z(e)||xe(e))return;let i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}_addObject(e,t){let i={i:t,$:{}};this.keys.forEach((a,s)=>{let r=a.getFn?a.getFn(e):this.getFn(e,a.path);if(z(r)){if(J(r)){let o=[];const u=[{nestedArrIndex:-1,value:r}];for(;u.length;){const{nestedArrIndex:h,value:l}=u.pop();if(z(l))if(G(l)&&!xe(l)){let p={v:l,i:h,n:this.norm.get(l)};o.push(p)}else J(l)&&l.forEach((p,f)=>{u.push({nestedArrIndex:f,value:p})})}i.$[s]=o}else if(G(r)&&!xe(r)){let o={v:r,n:this.norm.get(r)};i.$[s]=o}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function ht(n,e,{getFn:t=A.getFn,fieldNormWeight:i=A.fieldNormWeight}={}){const a=new Re({getFn:t,fieldNormWeight:i});return a.setKeys(n.map(dt)),a.setSources(e),a.create(),a}function Hn(n,{getFn:e=A.getFn,fieldNormWeight:t=A.fieldNormWeight}={}){const{keys:i,records:a}=n,s=new Re({getFn:e,fieldNormWeight:t});return s.setKeys(i),s.setIndexRecords(a),s}function fe(n,{errors:e=0,currentLocation:t=0,expectedLocation:i=0,distance:a=A.distance,ignoreLocation:s=A.ignoreLocation}={}){const r=e/n.length;if(s)return r;const o=Math.abs(i-t);return a?r+o/a:o?1:r}function Vn(n=[],e=A.minMatchCharLength){let t=[],i=-1,a=-1,s=0;for(let r=n.length;s<r;s+=1){let o=n[s];o&&i===-1?i=s:!o&&i!==-1&&(a=s-1,a-i+1>=e&&t.push([i,a]),i=-1)}return n[s-1]&&s-i>=e&&t.push([i,s-1]),t}const te=32;function jn(n,e,t,{location:i=A.location,distance:a=A.distance,threshold:s=A.threshold,findAllMatches:r=A.findAllMatches,minMatchCharLength:o=A.minMatchCharLength,includeMatches:u=A.includeMatches,ignoreLocation:h=A.ignoreLocation}={}){if(e.length>te)throw new Error(kn(te));const l=e.length,p=n.length,f=Math.max(0,Math.min(i,p));let v=s,m=f;const B=o>1||u,D=B?Array(p):[];let j;for(;(j=n.indexOf(e,m))>-1;){let E=fe(e,{currentLocation:j,expectedLocation:f,distance:a,ignoreLocation:h});if(v=Math.min(E,v),m=j+l,B){let b=0;for(;b<l;)D[j+b]=1,b+=1}}m=-1;let R=[],P=1,C=l+p;const y=1<<l-1;for(let E=0;E<l;E+=1){let b=0,F=C;for(;b<F;)fe(e,{errors:E,currentLocation:f+F,expectedLocation:f,distance:a,ignoreLocation:h})<=v?b=F:C=F,F=Math.floor((C-b)/2+b);C=F;let S=Math.max(1,f-F+1),c=r?p:Math.min(f+F,p)+l,k=Array(c+2);k[c+1]=(1<<E)-1;for(let T=c;T>=S;T-=1){let N=T-1,se=t[n.charAt(N)];if(B&&(D[N]=+!!se),k[T]=(k[T+1]<<1|1)&se,E&&(k[T]|=(R[T+1]|R[T])<<1|1|R[T+1]),k[T]&y&&(P=fe(e,{errors:E,currentLocation:N,expectedLocation:f,distance:a,ignoreLocation:h}),P<=v)){if(v=P,m=N,m<=f)break;S=Math.max(1,2*f-m)}}if(fe(e,{errors:E+1,currentLocation:f,expectedLocation:f,distance:a,ignoreLocation:h})>v)break;R=k}const M={isMatch:m>=0,score:Math.max(.001,P)};if(B){const E=Vn(D,o);E.length?u&&(M.indices=E):M.isMatch=!1}return M}function qn(n){let e={};for(let t=0,i=n.length;t<i;t+=1){const a=n.charAt(t);e[a]=(e[a]||0)|1<<i-t-1}return e}const ve=String.prototype.normalize?(n=>n.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(n=>n);class ft{constructor(e,{location:t=A.location,threshold:i=A.threshold,distance:a=A.distance,includeMatches:s=A.includeMatches,findAllMatches:r=A.findAllMatches,minMatchCharLength:o=A.minMatchCharLength,isCaseSensitive:u=A.isCaseSensitive,ignoreDiacritics:h=A.ignoreDiacritics,ignoreLocation:l=A.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:a,includeMatches:s,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:u,ignoreDiacritics:h,ignoreLocation:l},e=u?e:e.toLowerCase(),e=h?ve(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(v,m)=>{this.chunks.push({pattern:v,alphabet:qn(v),startIndex:m})},f=this.pattern.length;if(f>te){let v=0;const m=f%te,B=f-m;for(;v<B;)p(this.pattern.substr(v,te),v),v+=te;if(m){const D=f-te;p(this.pattern.substr(D),D)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:i,includeMatches:a}=this.options;if(e=t?e:e.toLowerCase(),e=i?ve(e):e,this.pattern===e){let B={isMatch:!0,score:0};return a&&(B.indices=[[0,e.length-1]]),B}const{location:s,distance:r,threshold:o,findAllMatches:u,minMatchCharLength:h,ignoreLocation:l}=this.options;let p=[],f=0,v=!1;this.chunks.forEach(({pattern:B,alphabet:D,startIndex:j})=>{const{isMatch:R,score:P,indices:C}=jn(e,B,D,{location:s+j,distance:r,threshold:o,findAllMatches:u,minMatchCharLength:h,includeMatches:a,ignoreLocation:l});R&&(v=!0),f+=P,R&&C&&(p=[...p,...C])});let m={isMatch:v,score:v?f/this.chunks.length:1};return v&&a&&(m.indices=p),m}}class ee{constructor(e){this.pattern=e}static isMultiMatch(e){return Ge(e,this.multiRegex)}static isSingleMatch(e){return Ge(e,this.singleRegex)}search(){}}function Ge(n,e){const t=n.match(e);return t?t[1]:null}class zn extends ee{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Un extends ee{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class Wn extends ee{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Gn extends ee{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Yn extends ee{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Qn extends ee{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class pt extends ee{constructor(e,{location:t=A.location,threshold:i=A.threshold,distance:a=A.distance,includeMatches:s=A.includeMatches,findAllMatches:r=A.findAllMatches,minMatchCharLength:o=A.minMatchCharLength,isCaseSensitive:u=A.isCaseSensitive,ignoreDiacritics:h=A.ignoreDiacritics,ignoreLocation:l=A.ignoreLocation}={}){super(e),this._bitapSearch=new ft(e,{location:t,threshold:i,distance:a,includeMatches:s,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:u,ignoreDiacritics:h,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class gt extends ee{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,i;const a=[],s=this.pattern.length;for(;(i=e.indexOf(this.pattern,t))>-1;)t=i+s,a.push([i,t-1]);const r=!!a.length;return{isMatch:r,score:r?0:1,indices:a}}}const Le=[zn,gt,Wn,Gn,Qn,Yn,Un,pt],Ye=Le.length,Xn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Jn="|";function Zn(n,e={}){return n.split(Jn).map(t=>{let i=t.trim().split(Xn).filter(s=>s&&!!s.trim()),a=[];for(let s=0,r=i.length;s<r;s+=1){const o=i[s];let u=!1,h=-1;for(;!u&&++h<Ye;){const l=Le[h];let p=l.isMultiMatch(o);p&&(a.push(new l(p,e)),u=!0)}if(!u)for(h=-1;++h<Ye;){const l=Le[h];let p=l.isSingleMatch(o);if(p){a.push(new l(p,e));break}}}return a})}const es=new Set([pt.type,gt.type]);class ts{constructor(e,{isCaseSensitive:t=A.isCaseSensitive,ignoreDiacritics:i=A.ignoreDiacritics,includeMatches:a=A.includeMatches,minMatchCharLength:s=A.minMatchCharLength,ignoreLocation:r=A.ignoreLocation,findAllMatches:o=A.findAllMatches,location:u=A.location,threshold:h=A.threshold,distance:l=A.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:i,includeMatches:a,minMatchCharLength:s,findAllMatches:o,ignoreLocation:r,location:u,threshold:h,distance:l},e=t?e:e.toLowerCase(),e=i?ve(e):e,this.pattern=e,this.query=Zn(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:a,ignoreDiacritics:s}=this.options;e=a?e:e.toLowerCase(),e=s?ve(e):e;let r=0,o=[],u=0;for(let h=0,l=t.length;h<l;h+=1){const p=t[h];o.length=0,r=0;for(let f=0,v=p.length;f<v;f+=1){const m=p[f],{isMatch:B,indices:D,score:j}=m.search(e);if(B){if(r+=1,u+=j,i){const R=m.constructor.type;es.has(R)?o=[...o,...D]:o.push(D)}}else{u=0,r=0,o.length=0;break}}if(r){let f={isMatch:!0,score:u/r};return i&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Me=[];function ns(...n){Me.push(...n)}function ke(n,e){for(let t=0,i=Me.length;t<i;t+=1){let a=Me[t];if(a.condition(n,e))return new a(n,e)}return new ft(n,e)}const ye={AND:"$and",OR:"$or"},_e={PATH:"$path",PATTERN:"$val"},De=n=>!!(n[ye.AND]||n[ye.OR]),ss=n=>!!n[_e.PATH],is=n=>!J(n)&&ut(n)&&!De(n),Qe=n=>({[ye.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function mt(n,e,{auto:t=!0}={}){const i=a=>{let s=Object.keys(a);const r=ss(a);if(!r&&s.length>1&&!De(a))return i(Qe(a));if(is(a)){const u=r?a[_e.PATH]:s[0],h=r?a[_e.PATTERN]:a[u];if(!G(h))throw new Error(Mn(u));const l={keyId:Se(u),pattern:h};return t&&(l.searcher=ke(h,e)),l}let o={children:[],operator:s[0]};return s.forEach(u=>{const h=a[u];J(h)&&h.forEach(l=>{o.children.push(i(l))})}),o};return De(n)||(n=Qe(n)),i(n)}function as(n,{ignoreFieldNorm:e=A.ignoreFieldNorm}){n.forEach(t=>{let i=1;t.matches.forEach(({key:a,norm:s,score:r})=>{const o=a?a.weight:null;i*=Math.pow(r===0&&o?Number.EPSILON:r,(o||1)*(e?1:s))}),t.score=i})}function ls(n,e){const t=n.matches;e.matches=[],z(t)&&t.forEach(i=>{if(!z(i.indices)||!i.indices.length)return;const{indices:a,value:s}=i;let r={indices:a,value:s};i.key&&(r.key=i.key.src),i.idx>-1&&(r.refIndex=i.idx),e.matches.push(r)})}function rs(n,e){e.score=n.score}function os(n,e,{includeMatches:t=A.includeMatches,includeScore:i=A.includeScore}={}){const a=[];return t&&a.push(ls),i&&a.push(rs),n.map(s=>{const{idx:r}=s,o={item:e[r],refIndex:r};return a.length&&a.forEach(u=>{u(s,o)}),o})}class le{constructor(e,t={},i){this.options={...A,...t},this.options.useExtendedSearch,this._keyStore=new wn(this.options.keys),this.setCollection(e,i)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Re))throw new Error(Ln);this._myIndex=t||ht(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){z(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let i=0,a=this._docs.length;i<a;i+=1){const s=this._docs[i];e(s,i)&&(this.removeAt(i),i-=1,a-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:i,includeScore:a,shouldSort:s,sortFn:r,ignoreFieldNorm:o}=this.options;let u=G(e)?G(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return as(u,{ignoreFieldNorm:o}),s&&u.sort(r),ot(t)&&t>-1&&(u=u.slice(0,t)),os(u,this._docs,{includeMatches:i,includeScore:a})}_searchStringList(e){const t=ke(e,this.options),{records:i}=this._myIndex,a=[];return i.forEach(({v:s,i:r,n:o})=>{if(!z(s))return;const{isMatch:u,score:h,indices:l}=t.searchIn(s);u&&a.push({item:s,idx:r,matches:[{score:h,value:s,norm:o,indices:l}]})}),a}_searchLogical(e){const t=mt(e,this.options),i=(o,u,h)=>{if(!o.children){const{keyId:p,searcher:f}=o,v=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:f});return v&&v.length?[{idx:h,item:u,matches:v}]:[]}const l=[];for(let p=0,f=o.children.length;p<f;p+=1){const v=o.children[p],m=i(v,u,h);if(m.length)l.push(...m);else if(o.operator===ye.AND)return[]}return l},a=this._myIndex.records,s={},r=[];return a.forEach(({$:o,i:u})=>{if(z(o)){let h=i(t,o,u);h.length&&(s[u]||(s[u]={idx:u,item:o,matches:[]},r.push(s[u])),h.forEach(({matches:l})=>{s[u].matches.push(...l)}))}}),r}_searchObjectList(e){const t=ke(e,this.options),{keys:i,records:a}=this._myIndex,s=[];return a.forEach(({$:r,i:o})=>{if(!z(r))return;let u=[];i.forEach((h,l)=>{u.push(...this._findMatches({key:h,value:r[l],searcher:t}))}),u.length&&s.push({idx:o,item:r,matches:u})}),s}_findMatches({key:e,value:t,searcher:i}){if(!z(t))return[];let a=[];if(J(t))t.forEach(({v:s,i:r,n:o})=>{if(!z(s))return;const{isMatch:u,score:h,indices:l}=i.searchIn(s);u&&a.push({score:h,key:e,value:s,idx:r,norm:o,indices:l})});else{const{v:s,n:r}=t,{isMatch:o,score:u,indices:h}=i.searchIn(s);o&&a.push({score:u,key:e,value:s,norm:r,indices:h})}return a}}le.version="7.1.0";le.createIndex=ht;le.parseIndex=Hn;le.config=A;le.parseQuery=mt;ns(ts);function us(n,e,t){const i=()=>{var r,o;return new le((r=Q(e))!=null?r:[],(o=Q(t))==null?void 0:o.fuseOptions)},a=U(i());ge(()=>{var r;return(r=Q(t))==null?void 0:r.fuseOptions},()=>{a.value=i()},{deep:!0}),ge(()=>Q(e),r=>{a.value.setCollection(r)},{deep:!0});const s=K(()=>{const r=Q(t);if(r?.matchAllWhenSearchEmpty&&!Q(n))return Q(e).map((u,h)=>({item:u,refIndex:h}));const o=r?.resultLimit;return a.value.search(Q(n),o?{limit:o}:void 0)});return{fuse:a,results:s}}function cs(n,e){let t="",i=0,a=!1;for(let s=n.length-1;s>=0;s--){if(n[s]===">")a=!0;else if(n[s]==="<"){a=!1,t=n[s]+t;continue}if(a||i++,i<=e)t=n[s]+t;else{t="..."+t;break}}return t}function Xe(n,e,t,i){function a(s,r=[]){s=s||"";let o="",u=0;r.forEach(l=>{if(l.length===2&&l[0]===l[1])return;const p=l[1]+1,f=p-l[0]>=e.length;o+=[s.substring(u,l[0]),f&&"<mark>",s.substring(l[0],p),f&&"</mark>"].filter(Boolean).join(""),u=p}),o+=s.substring(u);const h=o.indexOf("<mark>");return h!==-1&&(o=cs(o,o.length-h)),o}if(n.matches?.length){for(const s of n.matches)if(!(t&&s.key!==t)&&!i?.includes(s.key))return a(s.value,s.indices)}}const ds={slots:{root:"flex flex-col min-h-0 min-w-0 divide-y divide-default",input:"[&>input]:h-12",close:"",back:"p-0",content:"relative overflow-hidden flex flex-col",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1 focus:outline-none",group:"p-1 isolate",empty:"py-6 text-center text-sm text-muted",label:"p-1.5 text-xs font-semibold text-highlighted",item:"group relative w-full flex items-center gap-1.5 p-1.5 text-sm select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0 size-5",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"2xs",itemLeadingChip:"shrink-0 size-5",itemLeadingChipSize:"md",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0 size-5",itemTrailingHighlightedIcon:"shrink-0 size-5 text-dimmed hidden group-data-highlighted:inline-flex",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0 gap-0.5",itemTrailingKbdsSize:"md",itemLabel:"truncate space-x-1 rtl:space-x-reverse text-dimmed",itemLabelBase:"text-highlighted [&>mark]:text-inverted [&>mark]:bg-primary",itemLabelPrefix:"text-default",itemLabelSuffix:"text-dimmed [&>mark]:text-inverted [&>mark]:bg-primary"},variants:{active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:not-data-disabled:text-highlighted data-highlighted:not-data-disabled:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:not-group-data-disabled:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}}}},hs=["innerHTML"],fs=["innerHTML"],ps={__name:"UCommandPalette",props:Fe({as:{type:null,required:!1},icon:{type:String,required:!1},selectedIcon:{type:String,required:!1},trailingIcon:{type:String,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1,default:!0},close:{type:[Boolean,Object],required:!1},closeIcon:{type:String,required:!1},back:{type:[Boolean,Object],required:!1,default:!0},backIcon:{type:String,required:!1},groups:{type:Array,required:!1},fuse:{type:Object,required:!1},labelKey:{type:String,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},multiple:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},modelValue:{type:null,required:!1,default:""},defaultValue:{type:null,required:!1},highlightOnHover:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:Fe(["update:modelValue","highlight","entryFocus","leave","update:open"],["update:searchTerm"]),setup(n,{emit:e}){const t=n,i=e,a=tt(),s=nt(n,"searchTerm",{type:String,default:""}),{t:r}=Pt(),o=st(),u=Ot(Be(t,"as","disabled","multiple","modelValue","defaultValue","highlightOnHover","selectionBehavior"),i),h=it(Be(t,"loading","loadingIcon")),l=K(()=>He({extend:He(ds),...o.ui?.commandPalette||{}})()),p=K(()=>at({},t.fuse,{fuseOptions:{ignoreLocation:!0,threshold:.1,keys:[t.labelKey,"suffix"]},resultLimit:12,matchAllWhenSearchEmpty:!0})),f=U([]),v=K(()=>f.value[f.value.length-1]?.placeholder||t.placeholder||r("commandPalette.placeholder")),m=K(()=>f.value?.length?[f.value[f.value.length-1]]:t.groups),B=K(()=>m.value?.filter(b=>b.id?!b.ignoreFilter:(console.warn("[@nuxt/ui] CommandPalette group is missing an `id` property"),!1))?.flatMap(b=>b.items?.map(F=>({...F,group:b.id}))||[])||[]),{results:D}=us(s,B,p);function j(b,F){return b?.postFilter&&typeof b.postFilter=="function"&&(F=b.postFilter(s.value,F)),{...b,items:F.slice(0,p.value.resultLimit).map(S=>({...S,labelHtml:Xe(S,s.value,t.labelKey),suffixHtml:Xe(S,s.value,void 0,[t.labelKey])}))}}const R=K(()=>{const b=D.value.reduce((c,k)=>{const{item:$,matches:T}=k;return $.group&&(c[$.group]||=[],c[$.group]?.push({...$,matches:T})),c},{}),F=Object.entries(b).map(([c,k])=>{const $=m.value?.find(T=>T.id===c);if($)return j($,k)}).filter(c=>!!c);return(m.value?.map((c,k)=>({...c,index:k}))?.filter(c=>c.ignoreFilter&&c.items?.length)?.map(c=>({...j(c,c.items||[]),index:c.index}))||[]).reduce((c,k)=>(c.splice(k.index,0,k),c),[...F])}),P=lt("listboxRootRef");function C(b){b.children?.length&&(f.value.push({id:`history-${f.value.length}`,label:b.label,slot:b.slot,placeholder:b.placeholder,items:b.children}),s.value="",P.value?.highlightFirstItem())}function y(){f.value.length&&(f.value.pop(),s.value="",P.value?.highlightFirstItem())}function M(){s.value||y()}function E(b,F){F.children?.length?(b.preventDefault(),C(F)):F.onSelect?.(b)}return(b,F)=>(I(),_(d(hn),V(d(u),{ref_key:"listboxRootRef",ref:P,class:l.value.root({class:[t.ui?.root,t.class]})}),{default:w(()=>[W(d(vn),{modelValue:s.value,"onUpdate:modelValue":F[1]||(F[1]=S=>s.value=S),"as-child":""},{default:w(()=>[W(Nt,V({placeholder:v.value,variant:"none",autofocus:n.autofocus},d(h),{icon:n.icon||d(o).ui.icons.search,class:l.value.input({class:t.ui?.input}),onKeydown:ae(M,["backspace"])}),rt({_:2},[f.value?.length&&(n.back||a.back)?{name:"leading",fn:w(()=>[q(b.$slots,"back",{ui:l.value},()=>[W(Ve,V({icon:n.backIcon||d(o).ui.icons.arrowLeft,color:"neutral",variant:"link","aria-label":d(r)("commandPalette.back")},typeof n.back=="object"?n.back:{},{class:l.value.back({class:t.ui?.back}),onClick:y}),null,16,["icon","aria-label","class"])])]),key:"0"}:void 0,n.close||a.close?{name:"trailing",fn:w(()=>[q(b.$slots,"close",{ui:l.value},()=>[n.close?(I(),_(Ve,V({key:0,icon:n.closeIcon||d(o).ui.icons.close,color:"neutral",variant:"ghost","aria-label":d(r)("commandPalette.close")},typeof n.close=="object"?n.close:{},{class:l.value.close({class:t.ui?.close}),onClick:F[0]||(F[0]=S=>i("update:open",!1))}),null,16,["icon","aria-label","class"])):X("",!0)])]),key:"1"}:void 0]),1040,["placeholder","autofocus","icon","class"])]),_:3},8,["modelValue"]),W(d(fn),{class:H(l.value.content({class:t.ui?.content}))},{default:w(()=>[R.value?.length?(I(),Y("div",{key:0,role:"presentation",class:H(l.value.viewport({class:t.ui?.viewport}))},[(I(!0),Y(pe,null,ue(R.value,S=>(I(),_(d(mn),{key:`group-${S.id}`,class:H(l.value.group({class:t.ui?.group}))},{default:w(()=>[d(he)(S,t.labelKey)?(I(),_(d(xn),{key:0,class:H(l.value.label({class:t.ui?.label}))},{default:w(()=>[je(Ee(d(he)(S,t.labelKey)),1)]),_:2},1032,["class"])):X("",!0),(I(!0),Y(pe,null,ue(S.items,(c,k)=>(I(),_(d(En),{key:`group-${S.id}-${k}`,value:d(Ie)(c,["matches","group","onSelect","labelHtml","suffixHtml","children"]),disabled:c.disabled,"as-child":"",onSelect:$=>E($,c)},{default:w(()=>[W(Ht,V({ref_for:!0},d(Vt)(c),{custom:""}),{default:w(({active:$,...T})=>[W(jt,V({ref_for:!0},T,{class:l.value.item({class:[t.ui?.item,c.ui?.item,c.class],active:$||c.active})}),{default:w(()=>[q(b.$slots,c.slot||S.slot||"item",{item:c,index:k},()=>[q(b.$slots,c.slot?`${c.slot}-leading`:S.slot?`${S.slot}-leading`:"item-leading",{item:c,index:k},()=>[c.loading?(I(),_(oe,{key:0,name:n.loadingIcon||d(o).ui.icons.loading,class:H(l.value.itemLeadingIcon({class:[t.ui?.itemLeadingIcon,c.ui?.itemLeadingIcon],loading:!0}))},null,8,["name","class"])):c.icon?(I(),_(oe,{key:1,name:c.icon,class:H(l.value.itemLeadingIcon({class:[t.ui?.itemLeadingIcon,c.ui?.itemLeadingIcon],active:$||c.active}))},null,8,["name","class"])):c.avatar?(I(),_(qt,V({key:2,size:c.ui?.itemLeadingAvatarSize||t.ui?.itemLeadingAvatarSize||l.value.itemLeadingAvatarSize()},{ref_for:!0},c.avatar,{class:l.value.itemLeadingAvatar({class:[t.ui?.itemLeadingAvatar,c.ui?.itemLeadingAvatar],active:$||c.active})}),null,16,["size","class"])):c.chip?(I(),_(zt,V({key:3,size:c.ui?.itemLeadingChipSize||t.ui?.itemLeadingChipSize||l.value.itemLeadingChipSize(),inset:"",standalone:""},{ref_for:!0},c.chip,{class:l.value.itemLeadingChip({class:[t.ui?.itemLeadingChip,c.ui?.itemLeadingChip],active:$||c.active})}),null,16,["size","class"])):X("",!0)]),c.labelHtml||d(he)(c,t.labelKey)||a[c.slot?`${c.slot}-label`:S.slot?`${S.slot}-label`:"item-label"]?(I(),Y("span",{key:0,class:H(l.value.itemLabel({class:[t.ui?.itemLabel,c.ui?.itemLabel],active:$||c.active}))},[q(b.$slots,c.slot?`${c.slot}-label`:S.slot?`${S.slot}-label`:"item-label",{item:c,index:k},()=>[c.prefix?(I(),Y("span",{key:0,class:H(l.value.itemLabelPrefix({class:[t.ui?.itemLabelPrefix,c.ui?.itemLabelPrefix]}))},Ee(c.prefix),3)):X("",!0),Ce("span",{class:H(l.value.itemLabelBase({class:[t.ui?.itemLabelBase,c.ui?.itemLabelBase],active:$||c.active})),innerHTML:c.labelHtml||d(he)(c,t.labelKey)},null,10,hs),Ce("span",{class:H(l.value.itemLabelSuffix({class:[t.ui?.itemLabelSuffix,c.ui?.itemLabelSuffix],active:$||c.active})),innerHTML:c.suffixHtml||c.suffix},null,10,fs)])],2)):X("",!0),Ce("span",{class:H(l.value.itemTrailing({class:[t.ui?.itemTrailing,c.ui?.itemTrailing]}))},[q(b.$slots,c.slot?`${c.slot}-trailing`:S.slot?`${S.slot}-trailing`:"item-trailing",{item:c,index:k},()=>[c.children&&c.children.length>0?(I(),_(oe,{key:0,name:n.trailingIcon||d(o).ui.icons.chevronRight,class:H(l.value.itemTrailingIcon({class:[t.ui?.itemTrailingIcon,c.ui?.itemTrailingIcon]}))},null,8,["name","class"])):c.kbds?.length?(I(),Y("span",{key:1,class:H(l.value.itemTrailingKbds({class:[t.ui?.itemTrailingKbds,c.ui?.itemTrailingKbds]}))},[(I(!0),Y(pe,null,ue(c.kbds,(N,se)=>(I(),_(Ut,V({key:se,size:c.ui?.itemTrailingKbdsSize||t.ui?.itemTrailingKbdsSize||l.value.itemTrailingKbdsSize()},{ref_for:!0},typeof N=="string"?{value:N}:N),null,16,["size"]))),128))],2)):S.highlightedIcon?(I(),_(oe,{key:2,name:S.highlightedIcon,class:H(l.value.itemTrailingHighlightedIcon({class:[t.ui?.itemTrailingHighlightedIcon,c.ui?.itemTrailingHighlightedIcon]}))},null,8,["name","class"])):X("",!0)]),c.children?.length?X("",!0):(I(),_(d(Cn),{key:0,"as-child":""},{default:w(()=>[W(oe,{name:n.selectedIcon||d(o).ui.icons.check,class:H(l.value.itemTrailingIcon({class:[t.ui?.itemTrailingIcon,c.ui?.itemTrailingIcon]}))},null,8,["name","class"])]),_:2},1024))],2)])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["value","disabled","onSelect"]))),128))]),_:2},1032,["class"]))),128))],2)):(I(),Y("div",{key:1,class:H(l.value.empty({class:t.ui?.empty}))},[q(b.$slots,"empty",{searchTerm:s.value},()=>[je(Ee(s.value?d(r)("commandPalette.noMatch",{searchTerm:s.value}):d(r)("commandPalette.noData")),1)])],2))]),_:3},8,["class"])]),_:3},16,["class"]))}};function gs(){return{open:U(!1)}}const ms=Wt(gs),vs={slots:{modal:"sm:max-w-3xl sm:h-[28rem]",input:"[&>input]:text-base/5"}},ys=/^[^-]+.*-.*[^-]+$/,bs=/^[^_]+.*_.*[^_]+$/;function As(n,e={}){const t=U([]),i=()=>{t.value.splice(0,t.value.length)},a=Gt(i,e.chainDelay??800),{macOS:s}=Yt(),r=Qt(),o=l=>{if(!l.key)return;const p=/^[a-z]{1}$/i.test(l.key);let f;if(t.value.push(l.key),t.value.length>=2){f=t.value.slice(-2).join("-");for(const v of h.value.filter(m=>m.chained))if(v.key===f){v.enabled&&(l.preventDefault(),v.handler(l)),i();return}}for(const v of h.value.filter(m=>!m.chained))if(l.key.toLowerCase()===v.key&&l.metaKey===v.metaKey&&l.ctrlKey===v.ctrlKey&&!(p&&l.shiftKey!==v.shiftKey)){v.enabled&&(l.preventDefault(),v.handler()),i();return}a()},u=K(()=>{const l=r.value?.tagName,p=r.value?.contentEditable;return l==="INPUT"||l==="TEXTAREA"||p==="true"||p==="plaintext-only"?r.value?.name||!0:!1}),h=K(()=>Object.entries(Q(n)).map(([l,p])=>{if(!p)return null;let f;l.includes("-")&&l!=="-"&&!l.includes("_")&&!l.match(ys)?.length&&console.trace(`[Shortcut] Invalid key: "${l}"`),l.includes("_")&&l!=="_"&&!l.match(bs)?.length&&console.trace(`[Shortcut] Invalid key: "${l}"`);const v=l.includes("-")&&l!=="-"&&!l.includes("_");if(v)f={key:l.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const B=l.toLowerCase().split("_").map(D=>D);f={key:B.filter(D=>!["meta","command","ctrl","shift","alt","option"].includes(D)).join("_"),metaKey:B.includes("meta")||B.includes("command"),ctrlKey:B.includes("ctrl"),shiftKey:B.includes("shift"),altKey:B.includes("alt")||B.includes("option")}}if(f.chained=v,!s.value&&f.metaKey&&!f.ctrlKey&&(f.metaKey=!1,f.ctrlKey=!0),typeof p=="function"?f.handler=p:typeof p=="object"&&(f={...f,handler:p.handler}),!f.handler)return console.trace("[Shortcut] Invalid value"),null;let m=!0;return p.usingInput?typeof p.usingInput=="string"&&(m=u.value===p.usingInput):m=!u.value,f.enabled=m,f}).filter(Boolean));return Xt("keydown",o)}const xs={__name:"UContentSearch",props:Fe({icon:{type:String,required:!1},placeholder:{type:null,required:!1},autofocus:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},shortcut:{type:String,required:!1,default:"meta_k"},links:{type:Array,required:!1},navigation:{type:Array,required:!1},groups:{type:Array,required:!1},files:{type:Array,required:!1},fuse:{type:Object,required:!1},colorMode:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:void 0,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:["update:searchTerm"],setup(n,{expose:e}){const t=n,i=tt(),a=nt(n,"searchTerm",{type:String,default:""}),{t:s}=Jt(),{open:r}=ms(),o=Zt(),u=st(),h=it(Be(t,"icon","placeholder","autofocus","loading","loadingIcon","close","closeIcon")),l=Ie(i,["content"]),p=K(()=>at({},t.fuse,{fuseOptions:{includeMatches:!0}})),f=K(()=>qe({extend:qe(vs),...u.uiPro?.contentSearch||{}})());function v(C){return C.flatMap(y=>[{...y,suffix:y.description,icon:y.icon||u.ui.icons.file},...y.children?.map(M=>({...M,prefix:y.label+" >",suffix:M.description,icon:M.icon||y.icon||u.ui.icons.file}))||[]])}function m(C,y){return C.flatMap(M=>M.children?.length?m(M.children,M):t.files?.filter(E=>E.id===M.path||E.id.startsWith(`${M.path}#`))?.map(E=>B(E,M,y))||[])}function B(C,y,M){const E=[...new Set([M?.title,...C.titles].filter(Boolean))];return{prefix:E?.length?E.join(" > ")+" >":void 0,label:C.id===y.path?y.title:C.title,suffix:C.content.replaceAll("<","&lt;").replaceAll(">","&gt;"),to:C.id,icon:y.icon||M?.icon||(C.level>1?u.ui.icons.hash:u.ui.icons.file),level:C.level}}const D=K(()=>{const C=[];return t.links?.length&&C.push({id:"links",label:s("contentSearch.links"),items:v(t.links)}),t.navigation?.length&&(t.navigation.some(y=>!!y.children?.length)?C.push(...t.navigation.map(y=>({id:y.path,label:y.title,items:m(y.children||[]),postFilter:j}))):C.push({id:"docs",items:m(t.navigation),postFilter:j})),C.push(...t.groups||[]),t.colorMode&&!o?.forced&&C.push({id:"theme",label:s("contentSearch.theme"),items:[{label:s("colorMode.system"),icon:u.ui.icons.system,active:o.preference==="system",onSelect:()=>{o.preference="system"}},{label:s("colorMode.light"),icon:u.ui.icons.light,active:o.preference==="light",onSelect:()=>{o.preference="light"}},{label:s("colorMode.dark"),icon:u.ui.icons.dark,active:o.preference==="dark",onSelect:()=>{o.preference="dark"}}]}),C});function j(C,y){return C?y:y?.filter(M=>M.level===1)}function R(C){C.disabled||(r.value=!1,a.value="")}As({[t.shortcut]:{usingInput:!0,handler:()=>r.value=!r.value}});const P=lt("commandPaletteRef");return e({commandPaletteRef:P}),(C,y)=>{const M=ps,E=an;return I(),_(E,{open:d(r),"onUpdate:open":y[2]||(y[2]=b=>sn(r)?r.value=b:null),title:d(s)("contentSearch.title"),description:d(s)("contentSearch.description"),class:H(f.value.modal({class:t.class}))},{content:w(()=>[q(C.$slots,"content",{},()=>[W(M,V({ref_key:"commandPaletteRef",ref:P,"search-term":a.value,"onUpdate:searchTerm":y[0]||(y[0]=b=>a.value=b)},d(h),{groups:D.value,fuse:p.value,ui:d(en)(d(Ie)(f.value,["modal"]),t.ui),"onUpdate:modelValue":R,"onUpdate:open":y[1]||(y[1]=b=>r.value=b)}),rt({_:2},[ue(d(l),(b,F)=>({name:F,fn:w(S=>[q(C.$slots,F,tn(nn(S)))])}))]),1040,["search-term","groups","fuse","ui"])])]),_:3},8,["open","title","description","class"])}}};export{xs as default};
